import{u as x,d as S,a as y,_ as b,b as A}from"./popso.BWevpItH.js";import{W as B,Q as f,m as C,r as c,o as E,v as N,x as h,z as v,P as p,A as P,q as T,t as V,B as z,y as K}from"./entry.DB2Lx7dM.js";import{u as R}from"./auth.9oDIzv-s.js";const U="$s";function $(...l){const r=typeof l[l.length-1]=="string"?l.pop():void 0;typeof l[0]!="string"&&l.unshift(r);const[t,e]=l;if(!t||typeof t!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+t);if(e!==void 0&&typeof e!="function")throw new Error("[nuxt] [useState] init must be a function: "+e);const o=U+t,s=C(),i=B(s.payload.state,o);if(i.value===void 0&&e){const u=e();if(f(u))return s.payload.state[o]=u,u;i.value=u}return i}const j={class:"flex w-screen h-screen justify-center items-center"},q={class:"flex flex-col items-center gap-4 h-1/3 md:h-3/5 md:w-1/4 text-lg"},D=h("img",{src:S,class:"select-none pointer-events-none w-2/3 md:w-1/2 mb-8"},null,-1),W={__name:"index",setup(l){const r=x("login",{default:n=>""}),t=x("password",{default:n=>""});console.log(r.value),console.log(t.value);const e=$("auth",()=>r.value!==""&&t.value!=="");console.log(e.value);const o=c(r),s=c(t),i=c(),u=c(),_=c(e.value?"войти":"зарегистрироваться"),m=R();async function g(){let n=null;e.value?n=await y.auth(o.value,s.value):n=await y.register(o.value,s.value),"response"in n?(r.value=o.value,t.value=s.value,m.isAuthorized=!0,m.id=n.response.id,await T("/dashboard")):u.value=n.error}return E(()=>{_.value=e.value?"войти":"зарегистрироваться"}),(n,a)=>{const w=b,k=A;return V(),N("div",j,[h("div",q,[D,v(w,{class:"w-full",placeholder:"Логин",error:p(i),type:"text",value:p(o),"onUpdate:value":a[0]||(a[0]=d=>f(o)?o.value=d:null)},null,8,["error","value"]),v(w,{class:"w-full",placeholder:"Пароль",error:p(u),type:"password",value:p(s),"onUpdate:value":a[1]||(a[1]=d=>f(s)?s.value=d:null)},null,8,["error","value"]),v(k,{class:"w-full",onClicked:a[2]||(a[2]=d=>g())},{default:P(()=>[z(K(p(_)),1)]),_:1})])])}}};export{W as default};
