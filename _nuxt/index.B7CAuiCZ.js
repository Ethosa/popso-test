import{u as w,d as S,a as x,_ as b,b as A}from"./popso.D0G-bwr7.js";import{W as B,Q as v,m as C,r as d,v as E,x as h,z as f,P as c,A as N,q as P,t as T,B as V,y as z}from"./entry.CWQ-qCH4.js";import{u as K}from"./auth.HUoP2xfw.js";const R="$s";function U(...a){const u=typeof a[a.length-1]=="string"?a.pop():void 0;typeof a[0]!="string"&&a.unshift(u);const[e,l]=a;if(!e||typeof e!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+e);if(l!==void 0&&typeof l!="function")throw new Error("[nuxt] [useState] init must be a function: "+l);const t=R+e,o=C(),i=B(o.payload.state,t);if(i.value===void 0&&l){const r=l();if(v(r))return o.payload.state[t]=r,r;i.value=r}return i}const $={class:"flex w-screen h-screen justify-center items-center"},j={class:"flex flex-col items-center gap-4 h-1/3 md:h-3/5 md:w-1/4 text-lg"},q=h("img",{src:S,class:"select-none pointer-events-none w-2/3 md:w-1/2 mb-8"},null,-1),W={__name:"index",setup(a){const u=w("login",{default:s=>""}),e=w("password",{default:s=>""}),l=U("auth",()=>u.value!==""&&e.value!==""),t=d(u),o=d(e),i=d(),r=d(),y=u.value!==""&&e.value!==""?"войти":"зарегистрироваться",_=K();async function g(){let s=null;l.value?s=await x.auth(t.value,o.value):s=await x.register(t.value,o.value),console.log("hurrah"),console.log(s),"response"in s?(u.value=t.value,e.value=o.value,_.isAuthorized=!0,_.id=s.response.id,await P("/dashboard")):r.value=s.error}return(s,n)=>{const m=b,k=A;return T(),E("div",$,[h("div",j,[q,f(m,{class:"w-full",placeholder:"Логин",error:c(i),type:"text",value:c(t),"onUpdate:value":n[0]||(n[0]=p=>v(t)?t.value=p:null)},null,8,["error","value"]),f(m,{class:"w-full",placeholder:"Пароль",error:c(r),type:"password",value:c(o),"onUpdate:value":n[1]||(n[1]=p=>v(o)?o.value=p:null)},null,8,["error","value"]),f(k,{class:"w-full",onClicked:n[2]||(n[2]=p=>g())},{default:N(()=>[V(z(c(y)),1)]),_:1})])])}}};export{W as default};
