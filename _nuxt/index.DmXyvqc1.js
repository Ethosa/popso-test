import{u as w,d as k,a as x,_ as S,b}from"./popso.IQ4M5r65.js";import{W as A,Q as v,m as B,r as d,v as C,x as y,z as f,P as p,A as E,q as N,t as P,B as V,y as T}from"./entry.j-v6RYTS.js";import{u as z}from"./auth.DiJC_CQ7.js";const K="$s";function R(...r){const u=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(u);const[o,s]=r;if(!o||typeof o!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+o);if(s!==void 0&&typeof s!="function")throw new Error("[nuxt] [useState] init must be a function: "+s);const e=K+o,t=B(),i=A(t.payload.state,e);if(i.value===void 0&&s){const l=s();if(v(l))return t.payload.state[e]=l,l;i.value=l}return i}const U={class:"flex w-screen h-screen justify-center items-center"},$={class:"flex flex-col items-center gap-4 h-1/3 md:h-3/5 md:w-1/4 text-lg"},j=y("img",{src:k,class:"select-none pointer-events-none w-2/3 md:w-1/2 mb-8"},null,-1),Q={__name:"index",setup(r){const u=w("login",{default:n=>""}),o=w("password",{default:n=>""}),s=R("auth",()=>u.value!==""&&o.value!==""),e=d(u),t=d(o),i=d(),l=d(),_=z();async function h(){let n=null;s.value?n=await x.auth(e.value,t.value):n=await x.register(e.value,t.value),"response"in n?(u.value=e.value,o.value=t.value,_.isAuthorized=!0,_.id=n.response.id,await N("/dashboard")):l.value=n.error}return(n,a)=>{const m=S,g=b;return P(),C("div",U,[y("div",$,[j,f(m,{class:"w-full",placeholder:"Логин",error:p(i),type:"text",value:p(e),"onUpdate:value":a[0]||(a[0]=c=>v(e)?e.value=c:null)},null,8,["error","value"]),f(m,{class:"w-full",placeholder:"Пароль",error:p(l),type:"password",value:p(t),"onUpdate:value":a[1]||(a[1]=c=>v(t)?t.value=c:null)},null,8,["error","value"]),f(g,{class:"w-full",onClicked:a[2]||(a[2]=c=>h())},{default:E(()=>[V(T(p(s).value?"войти":"зарегистрироваться"),1)]),_:1})])])}}};export{Q as default};
