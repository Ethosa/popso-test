import{u as x,d as S,a as y,_ as b,b as A}from"./popso.BkM1WU41.js";import{W as B,Q as v,m as C,r as p,o as E,v as N,x as h,z as f,P as c,A as P,q as T,t as V,B as z,y as K}from"./entry.CTGQmJw_.js";import{u as R}from"./auth.BcBFhFaH.js";const U="$s";function $(...r){const u=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(u);const[s,e]=r;if(!s||typeof s!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+s);if(e!==void 0&&typeof e!="function")throw new Error("[nuxt] [useState] init must be a function: "+e);const t=U+s,o=C(),i=B(o.payload.state,t);if(i.value===void 0&&e){const l=e();if(v(l))return o.payload.state[t]=l,l;i.value=l}return i}const j={class:"flex w-screen h-screen justify-center items-center"},q={class:"flex flex-col items-center gap-4 h-1/3 md:h-3/5 md:w-1/4 text-lg"},D=h("img",{src:S,class:"select-none pointer-events-none w-2/3 md:w-1/2 mb-8"},null,-1),W={__name:"index",setup(r){const u=x("login",{default:n=>""}),s=x("password",{default:n=>""}),e=$("auth",()=>u.value!==""&&s.value!==""),t=p(u),o=p(s),i=p(),l=p(),_=p(e.value?"войти":"зарегистрироваться"),m=R();async function g(){let n=null;e.value?n=await y.auth(t.value,o.value):n=await y.register(t.value,o.value),"response"in n?(u.value=t.value,s.value=o.value,m.isAuthorized=!0,m.id=n.response.id,await T("/dashboard")):l.value=n.error}return E(()=>{_.value=e.value?"войти":"зарегистрироваться"}),(n,a)=>{const w=b,k=A;return V(),N("div",j,[h("div",q,[D,f(w,{class:"w-full",placeholder:"Логин",error:c(i),type:"text",value:c(t),"onUpdate:value":a[0]||(a[0]=d=>v(t)?t.value=d:null)},null,8,["error","value"]),f(w,{class:"w-full",placeholder:"Пароль",error:c(l),type:"password",value:c(o),"onUpdate:value":a[1]||(a[1]=d=>v(o)?o.value=d:null)},null,8,["error","value"]),f(k,{class:"w-full",onClicked:a[2]||(a[2]=d=>g())},{default:P(()=>[z(K(c(_)),1)]),_:1})])])}}};export{W as default};
