import{u as f,d as y,a as m,_ as B,b as C}from"./popso.BnHNk22E.js";import{r as a,o as b,v as S,x,z as c,P as n,Q as w,A,q as E,t as N,B as P,y as T}from"./entry.SvB7XTke.js";import{u as V}from"./auth.j8VyicER.js";const z={class:"flex w-screen h-screen justify-center items-center"},U={class:"flex flex-col items-center gap-4 h-1/3 md:h-3/5 md:w-1/4 text-lg"},j=x("img",{src:y,class:"select-none pointer-events-none w-2/3 md:w-1/2 mb-8"},null,-1),Q={__name:"index",setup(q){const r=f("login",{default:e=>""}),u=f("password",{default:e=>""}),i=r.value!==""&&u.value!=="",o=a(r),t=a(u),h=a(),p=a(),d=a(i!==""?"войти":"зарегистрироваться"),v=V();async function g(){let e=null;i?e=await m.auth(o.value,t.value):e=await m.register(o.value,t.value),"response"in e?(r.value=o.value,u.value=t.value,v.isAuthorized=!0,v.id=e.response.id,await E("/dashboard")):p.value=e.error}return b(()=>{d.value=i?"войти":"зарегистрироваться"}),(e,s)=>{const _=B,k=C;return N(),S("div",z,[x("div",U,[j,c(_,{class:"w-full",placeholder:"Логин",error:n(h),type:"text",value:n(o),"onUpdate:value":s[0]||(s[0]=l=>w(o)?o.value=l:null)},null,8,["error","value"]),c(_,{class:"w-full",placeholder:"Пароль",error:n(p),type:"password",value:n(t),"onUpdate:value":s[1]||(s[1]=l=>w(t)?t.value=l:null)},null,8,["error","value"]),c(k,{class:"w-full",onClicked:s[2]||(s[2]=l=>g())},{default:A(()=>[P(T(n(d)),1)]),_:1})])])}}};export{Q as default};
